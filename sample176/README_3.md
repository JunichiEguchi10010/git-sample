WordPress 脆弱性 セキュリティ について 20251001

WordPressは世界で最も使われているCMSですが、その分 攻撃者から狙われやすい という特徴があります。
代表的な「セキュリティ上の危ない点」を整理すると以下の通りです。

🔒 WordPressで危ない点

1. プラグイン・テーマの脆弱性
無料で便利なプラグインやテーマが豊富にありますが、開発者がメンテナンスをやめるとセキュリティホールが放置されます。
人気プラグインのゼロデイ脆弱性が発見されると、攻撃が一気に広がります。
👉 不要なプラグインは削除、更新は常に最新にすることが重要です。

2. 管理画面（wp-admin / wp-login.php）の不正アクセス
標準のログインURLはすぐ分かるため、世界中のボットから総当たり攻撃（ブルートフォース攻撃）を受けやすいです。
パスワードが弱いと突破されます。
👉 強力なパスワード、多要素認証（2FA）、ログイン試行回数制限が必須です。

3. コア（本体）のアップデート遅れ
WordPress本体の脆弱性が見つかるとすぐにアップデートされますが、更新を放置すると攻撃対象にされやすいです。
👉 自動更新を有効化、または定期的に手動でアップデートしましょう。

4. 古いPHPやサーバー設定
WordPressはPHPで動いているため、古いバージョン（例：PHP5系や7.0）は既知の脆弱性だらけ。
サーバーの設定（ディレクトリの書き込み権限、ファイル権限）が緩いと改ざんされやすいです。
👉 最新のPHPを使い、権限設定を適切に行う必要があります。

5. ファイルアップロード関連の脆弱性
フォームやメディアアップロードで「PHPファイル」などをアップロードされると、サーバーで実行されてしまい乗っ取られることがあります。
👉 拡張子制限・WAFの導入で防御が必要です。

6. SQLインジェクション・XSS（クロスサイトスクリプティング）
不正にコードを入力され、データベースやサイトが改ざんされる攻撃。
コードの安全性が低いプラグインで特に発生します。
👉 信頼できるプラグインのみ利用し、セキュリティプラグインで防御を強化することが重要です。

7. バックアップ不足
攻撃を完全に防ぐことはできません。
万が一改ざんやランサムウェア攻撃を受けたときにバックアップがないと復旧できません。
👉 定期的に外部サーバーやクラウドにバックアップを保存しておくことが必須です。

✅ まとめ

WordPressの危ない点は「使う人の管理不足」が原因になることが多いです。
対策としては：
・本体・プラグイン・テーマを常に更新
・強力なパスワード＋2FA
・ログインURL変更・ログイン試行制限
・最新PHP・適切なサーバー設定
・定期バックアップ


✅ ワードプレスの本体・プラグイン・テーマを常に更新をする方法
WordPressの本体・プラグイン・テーマを常に最新の状態に保つには、自動更新機能を活用するのが最も安全かつ効率的です。

🔄 自動更新の設定方法
✅ 1. WordPress本体の自動更新
WordPressは、セキュリティアップデート（マイナーアップデート）を自動で行う仕様になっていますが、メジャーアップデート（例：6.0 → 6.1）も自動化したい場合は以下の方法があります。

方法A：wp-config.php にコードを追加

php
define( 'WP_AUTO_UPDATE_CORE', true );
これで、メジャーアップデートも自動で適用されます。

方法B：プラグイン「Easy Updates Manager」を使う
WordPress管理画面 → プラグイン → 新規追加 →「Easy Updates Manager」で検索・インストール
有効化後、「Updates Options」で本体・プラグイン・テーマの自動更新を細かく設定可能

✅ 2. プラグインの自動更新
方法A：WordPress標準機能で設定
管理画面 → プラグイン → 各プラグインの「自動更新を有効化」リンクをクリック

方法B：一括設定（WordPress 5.5以降）
管理画面 → プラグイン一覧 → 右上の「表示オプション」→ 自動更新列を表示
一括で自動更新を有効化可能

✅ 3. テーマの自動更新
管理画面 → 外観 → テーマ → 使用中のテーマをクリック
「自動更新を有効化」ボタンを押す

※子テーマを使っている場合は、更新による上書きに注意。
カスタマイズはfunctions.phpやCSSで分離しておくと安全です。

⚠️ 子テーマを使っている場合の注意点
🔍 子テーマとは？
親テーマ（元のテーマ）をベースにして、自分だけのカスタマイズを加えるためのテーマ

functions.php や style.css などを独自に編集して、親テーマのアップデートに影響されないようにする

🧨 なぜ注意が必要？
親テーマが自動更新されると、直接編集していたファイルが上書きされる可能性があります
特に、親テーマの header.php や footer.php を直接編集していた場合、更新で消えることがあります

🛠 安全なカスタマイズ方法
カスタマイズ内容	    安全な方法
CSSの調整	         子テーマの style.css に記述
PHPの追加処理	     子テーマの functions.php に記述
テンプレートの変更	  子テーマに header.php や single.php をコピーして編集
JavaScript追加	     子テーマに独自ファイルを作成し、functions.phpで読み込む
こうすることで、親テーマが更新されても自分のカスタマイズは維持されます。

🔔 補足：更新前のバックアップも忘れずに
自動更新は便利ですが、更新による不具合のリスクもゼロではありません。
「BackWPup」などのプラグインで定期バックアップを設定しておくと安心です。


✅ ワードプレスでログイン試行制限を設定する方法
不正アクセスやブルートフォース攻撃（総当たり攻撃）を防ぐことができます

方法①：プラグイン「Limit Login Attempts Reloaded」を使う（定番）
✅ 特徴
無料で使える軽量プラグイン
ログイン試行回数、ロック時間、IP制限などを細かく設定可能
管理画面からブロック状況を確認できる

🔧 設定手順
WordPress管理画面 → プラグイン → 新規追加 →「Limit Login Attempts Reloaded」で検索・インストール
有効化後、「設定」→「Limit Login Attempts」へ移動

以下の項目を設定：
最大試行回数（例：3回）
ロックアウト時間（例：20分）
IPホワイトリスト（自分のIPを除外可能）
通知設定（ロックアウト時にメール通知）

🔐 方法②：セキュリティ統合プラグインで制限する
✅ 例：Wordfence Security、iThemes Security
より高度なセキュリティ機能（ファイアウォール、2FA、スキャン）と連携可能
ログイン試行制限も含まれており、柔軟な設定が可能

💡 補足：ログイン保護のベストプラクティス
対策	                内容
2FA（二要素認証）	 認証アプリやメールコードでログイン強化
reCAPTCHA導入	    ロボットによるログイン試行を防止
ログインURL変更	     /wp-login.phpを別のURLに変更して隠す
管理者名の非公開	「admin」などの一般的なユーザー名は避ける


✅ ワードプレスでWordPressで2FA（二要素認証）を導入する方法
プラグイン「Two Factor」または「WP 2FA」を使う

✅ WP 2FA（おすすめ）
特徴：初心者にも使いやすく、Google Authenticatorやメール認証に対応

設定手順：
WordPress管理画面 → プラグイン →「WP 2FA」で検索・インストール
有効化後、ウィザードに従って設定を開始
認証方法を選択（例：認証アプリ、メールコード）
QRコードをスマホの認証アプリ（Google AuthenticatorやAuthy）で読み取る
バックアップコードを保存（万が一スマホが使えない場合に備えて）

✅ Two Factor（シンプルで軽量）
特徴：WordPress公式プラグイン。メール、TOTP（認証アプリ）に対応

設定手順：
プラグインをインストール・有効化
ユーザー → プロフィール →「Two-Factor Options」で設定
認証方法を選択して有効化

📱 推奨認証アプリ
アプリ名	                        特徴
Google Authenticator	    シンプルで広く使われている
Authy	                    バックアップ機能あり。複数端末で使える
Microsoft Authenticator	    Microsoft製。企業利用にも強い

💡 補足：セキュリティ強化のために
管理者だけでなく、すべてのユーザーに2FAを義務化することも可能（WP 2FAで設定可）
ログイン試行制限（Limit Login Attempts Reloadedなど）と併用するとさらに安全
サーバー側のSSL（https）も必須


✅ 最新PHP・適切なサーバー設定方法は？
WordPressを高速かつ安全に運用するためには、最新のPHPバージョンへの移行と適切なサーバー設定が不可欠です。

🧠 なぜPHPを最新版にするべきか？
理由	                内容
🔒 セキュリティ	     PHP 7.4以前は公式サポート終了。脆弱性が放置されるリスクあり
⚡ パフォーマンス	PHP 8.x系はJITコンパイルにより平均20%高速化
🔄 互換性	        最新プラグイン・テーマとの整合性が向上。表示崩れやエラーを防止

🛠 最新PHPへの安全な移行手順
✅ 1. 互換性チェック（事前準備）
プラグイン「PHP Compatibility Checker」をインストール
WordPress本体・プラグイン・テーマの互換性を確認
エラー箇所をCSVで出力 → 修正対象を特定

✅ 2. テスト環境構築
「Local by Flywheel」などでローカル環境を構築
ステージング環境に本番データを同期し、動作確認

✅ 3. サーバー設定（レンタルサーバー別）
サーバー	    設定手順
Xserver	    サーバーパネル →「PHP Ver.切替」→ 最新版を選択
ConoHa WING	サイト管理 →「PHPバージョン管理」→ 編集
Lolipop!	管理画面 →「PHP設定」→ ドメイン選択 → 最新版へ変更
Kinsta	    MyKinsta →「ツール」→「PHP設定」→ 変更

✅ 4. 本番適用と確認
バックアップ取得 → メンテナンスモード起動
PHPバージョン変更 → キャッシュクリア
error_log や debug.log でエラー確認
フロントエンド・フォーム・EC機能などをテスト


✅ ワードプレスの定期バックアップ方法
🛠 定期バックアップの主な方法
1. プラグイン「BackWPup」を使う（おすすめ）
特徴：無料で使える人気プラグイン。自動バックアップのスケジュール設定が可能。

設定手順：
WordPress管理画面 → プラグイン → 新規追加 →「BackWPup」で検索・インストール
「新しいジョブを追加」でバックアップ対象（ファイル・データベース）を選択
保存先（Dropbox、Google Drive、メール添付など）を設定
スケジュールタブで「毎週」「毎月」などの自動実行を設定
復元方法：バックアップファイルをダウンロードし、FTPやphpMyAdminで復元

2. レンタルサーバーの自動バックアップ機能を使う
特徴：Xserver、ConoHa、ロリポップなど多くの国内サーバーが自動バックアップ機能を提供

設定手順：
サーバーの管理画面にログイン
「バックアップ」メニューから自動保存の頻度や保存期間を確認
必要に応じて手動でバックアップデータをダウンロード
復元方法：管理画面から復元ボタンを押すだけの簡単操作も可能

💡 バックアップ対象とタイミング
対象	        内容	                        タイミング
ファイル	    テーマ・プラグイン・画像など	週1回以上、自動
データベース	投稿・設定・コメントなど	    毎日または週1回、自動
カスタマイズ前	テーマ編集・プラグイン更新前	 手動で即時