WordPress フィルターフックとアクションフックについて　20250420

フィルターフックはデータを変更するため、アクションフックは特定のタイミングで動作させるために使用される点が主な違いです。

1. フィルターフック (Filter Hook)
役割:
WordPressのデータや出力結果を変更・加工するために使用されます。
特定のデータに対してフィルター（加工）を適用し、その結果を返します。

get_the_archive_title の例:
php
add_filter('get_the_archive_title', function($title) {
    return 'カスタムタイトル: ' . $title;
});
上記の例では、アーカイブページのタイトルに「カスタムタイトル: 」という接頭辞を追加しています。

特徴:
必ずデータを 返す 必要があります（例えば return を使う）。
データを加工して表示するためのフックです。

2. アクションフック (Action Hook)
役割:
特定のタイミングで関数やコードを実行させるために使用されます。
例えば、テーマやプラグインのセットアップ時に処理を実行する場合に利用されます。

after_setup_theme の例:
php
add_action('after_setup_theme', function() {
    add_theme_support('post-thumbnails');
});
この例では、テーマのセットアップ時にアイキャッチ画像（サムネイル）をサポートする機能を追加しています。

特徴:
データを返す必要はありません（処理を実行するだけ）。
任意のタイミングで動作させるためのフックです。

フィルターフックとアクションフックの違い
項目	                    フィルターフック                    	        アクションフック
目的	                データや出力結果を加工・変更する	            特定のタイミングで処理を実行する
返り値	                必須（加工されたデータを返す）      	        不要（処理を実行するだけ）
動作タイミング	        データのフィルター処理中に適用される     	    WordPressのライフサイクルイベント中に動作
例	                    タイトルやコンテンツの加工	                    テーマやプラグインの初期設定など

【フィルターフック】
フィルターフックは、データを加工・変更するために使用されます。

get_the_title: 投稿タイトルを変更。

the_content: 投稿本文を加工。

excerpt_more: 抜粋の「続きを読む」リンクをカスタマイズ。

wp_mail: メール送信時の内容を変更。

post_class: 投稿のCSSクラスを変更。

nav_menu_css_class: ナビゲーションメニューのCSSクラスを変更。

【アクションフック】
アクションフックは、特定のタイミングで処理を実行するために使用されます。

init: WordPressの初期化時に処理を実行。

wp_enqueue_scripts: スクリプトやスタイルを登録。

after_setup_theme: テーマのセットアップ時に処理を実行。

save_post: 投稿が保存されたときに処理を実行。

wp_footer: フッター部分に処理を追加。

admin_menu: 管理画面のメニューをカスタマイズ。