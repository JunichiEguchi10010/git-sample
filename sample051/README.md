WordPress フィルターフックとアクションフック 20250427


【フィルターフック（Filter Hook）】
目的：​特定のデータを変更・加工するために使用します。
​例えば、投稿のタイトルや本文、出力されるHTMLなどを変更する際に利用されます。​

使用方法：
add_filter( 'フック名', '関数名', 優先度, 引数の数 );

フック名：​適用したいフィルターの名前（例：the_content）。
関数名：​実行したい関数の名前。
優先度（省略可能）：​同じフックに複数の関数が登録されている場合の実行順序（数値が小さいほど先に実行）。
引数の数（省略可能）：​関数が受け取る引数の数。​

例：​投稿本文の末尾にカスタムメッセージを追加する​
functions.phpに記述
<!-- 投稿本文の末尾に指定したメッセージが表示される。 -->
function add_custom_message( $content ) {
    return $content . '<p>カスタムメッセージを追加しました。</p>';
}
add_filter( 'the_content', 'add_custom_message' );


【アクションフック（Action Hook）】
目的：​特定のタイミングで任意の処理を実行するために使用します。​
例えば、ページの読み込み時や投稿の保存時などにカスタム関数を実行できます。​

使用方法：
add_action( 'フック名', '関数名', 優先度, 引数の数 );

フック名：​処理を追加したいアクションの名前（例：wp_head）。
関数名：​実行したい関数の名前。
優先度（省略可能）：​同じフックに複数の関数が登録されている場合の実行順序。
引数の数（省略可能）：​関数が受け取る引数の数。​

例：​<head>タグ内にカスタムスタイルを追加する​
functions.phpに記述
<!-- ページの<head>セクションにカスタムスタイルが挿入される。 ​ -->
function add_custom_style() {
    echo '<style>body { background-color: #f0f0f0; }</style>';
}
add_action( 'wp_head', 'add_custom_style' );



🔄 フィルターフックとアクションフックの違い

特徴	                フィルターフック	                    アクションフック
主な目的	            データの変更・加工	                    処理の追加・実行
使用関数	            add_filter()	                      add_action()
戻り値の必要性	         あり（変更後のデータを返す）        	 なし（処理を実行するだけ）
使用例	                投稿タイトルの変更、本文の加工など	     スクリプトの読み込み、カスタム処理の実行など

🧩 代表的なフックの例
フィルターフック：
the_content：​投稿本文の出力前に内容を変更。
the_title：​投稿タイトルの出力前に内容を変更。
body_class：​<body>タグのクラス属性を変更。​

アクションフック：
wp_enqueue_scripts：​スクリプトやスタイルの読み込み時に処理を追加。
wp_head：​<head>セクションの出力時に処理を追加。
init：​WordPressの初期化時に処理を追加。​



WordPressアクションフックとフィルターフックの使い方（functions.phpカスタマイズ）（連結講座#7）
https://www.youtube.com/watch?v=SmiLFgJcLa0