WordPress 【the_archive_title】関数について　20250419

the_archive_title()は、そのページがどのアーカイブ（一覧ページ）に属しているかを示すためのタイトルを動的に生成し、表示する目的で使用される関数です。
この関数が設置された場所に、現在のアーカイブに応じた適切なタイトルを出力します。

基本的な特徴
動的なタイトル出力:

現在のアーカイブに対応するタイトルを自動的に生成します。
(現在ユーザーが閲覧しているアーカイブページの種類のこと)

例: カテゴリーアーカイブページでは「カテゴリー: JavaScript」、タグアーカイブページでは「タグ: Web開発」のようなタイトルが生成されます。


【アーカイブの種類】
以下のようなアーカイブページがあります：

カテゴリーアーカイブ:
特定のカテゴリーに属する投稿一覧。
例: /category/javascript/

タグアーカイブ:
特定のタグに関連する投稿一覧。
例: /tag/technology/

日付アーカイブ:
年や月、日に基づく投稿一覧。
例: /2025/04/

カスタムタクソノミーアーカイブ:
カスタムタクソノミー（例: "genre"）に基づく投稿一覧。
例: /genre/action/

作成者アーカイブ:
特定の投稿者が作成した記事一覧。
例: /author/junichi/

現在のアーカイブの識別
WordPressは現在表示されているアーカイブの種類を識別し、それに応じたデータやテンプレートを適用します。
例えば:
is_category(): 現在のページがカテゴリーアーカイブかどうかを確認。
is_tag(): 現在のページがタグアーカイブかどうかを確認。
is_date(): 現在のページが日付アーカイブかどうかを確認。

the_archive_title()との関係
the_archive_title()関数を使うと、現在のアーカイブの種類と関連するタイトルが動的に生成され、表示されます。

カテゴリーページでは「カテゴリー: JavaScript」のように出力。
タグページでは「タグ: Technology」のように出力。
まとめると、「現在のアーカイブ」とは、訪問者がどの分類（カテゴリー、タグ、日付など）の投稿一覧を見ているかを指します


【クエリーに基づくオブジェクト】
現在のページがどのような種類のアーカイブページであるかを識別し、その種類に応じたタイトルを出力します。

引数なしで使用可能:

the_archive_title()関数は、引数を必要としないので簡単に利用できます。

使用例
以下は、カテゴリーアーカイブページでタイトルを表示するコードの例です：

php
<?php if (have_posts()) : ?>
    <h1><?php the_archive_title(); ?></h1>
    <?php while (have_posts()) : the_post(); ?>
        <h2><?php the_title(); ?></h2>
        <p><?php the_content(); ?></p>
    <?php endwhile; ?>
<?php endif; ?>
結果:

カテゴリー「JavaScript」のアーカイブページでは「カテゴリー: JavaScript」というタイトルが生成されます。

具体的な用途
カテゴリーページ:
特定のカテゴリーの投稿一覧を表示するページで、そのカテゴリー名を動的に表示。

タグページ:
タグを基にしたアーカイブページで、タグ名をタイトルとして表示。

日付アーカイブ:
日付ベースのアーカイブページ（例:「2023年4月の投稿」）のタイトルを表示。

カスタマイズ方法
出力されるタイトルをカスタマイズしたい場合は、single_cat_title()やget_the_archive_title()を利用し、フィルターを追加することが可能です。

以下はタイトルを加工する例です：

php
add_filter('get_the_archive_title', function ($title) {
    if (is_category()) {
        $title = 'カテゴリー名: ' . single_cat_title('', false);
    }
    return $title;
});
このコードは、カテゴリーアーカイブタイトルを「カテゴリー名: JavaScript」の形式で表示するよう変更します。

注意点
出力されるタイトルはHTMLタグで囲まれることがあるため、スタイリングをカスタマイズする際にはCSSで対応する必要があります。

他のアーカイブ関数（例: the_archive_description()）と併せて使用すると、より詳細な情報を表示可能です。