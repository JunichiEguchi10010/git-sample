WordPress 条件分岐を使った主要な切り分け手法 20250404

1   条件分岐タグ（例: if (is_page())）※使用頻度高い
2   get_post()でスラッグやカスタムフィールドの利用
3   Location APIでURL情報を使った分岐
4   ユーザーロールやデバイスによる分岐
5   カスタムタクソノミーやクエリパラメータによる分岐
6   CSSクラスやテンプレート階層を活用


【選択基準】
シンプルな分岐が必要な場合: 条件分岐タグ（例: if (is_page())）を使用。

複雑な動作やデータに基づく処理が必要な場合: get_post()やカスタムフィールド。

JavaScriptで動的な表示を行いたい場合: Location API。

ユーザーや環境による切り分けが必要な場合: ユーザーロールやデバイス分岐。

カテゴリやURLパラメータによる切り分け: カスタムタクソノミーやクエリ。

デザインやスタイルの微調整が必要な場合: CSSクラスやテンプレート階層を活用。



1. 条件分岐タグ（例: if (is_page())）
概要: WordPressの公式テンプレートタグを使用して、特定の条件（ページ、投稿、カテゴリなど）を判定する。

用途:
トップページ、投稿ページ、固定ページなどを切り分ける際に最も一般的に使用。

例:
php
if (is_page('about')) {
    echo '<p>会社概要ページです</p>';
}


2. get_post()でスラッグやカスタムフィールドの利用
概要: 特定の投稿やページの詳細情報（スラッグ、カスタムフィールドなど）を取得して、条件分岐を行う。

用途:
動的にスラッグやカスタムフィールドに基づいた処理を実行。

例:
php
$pageinfo = get_post(get_the_ID());
if ($pageinfo->post_name === 'services') {
    echo '<p>サービスページ専用の内容</p>';
}



3. Location APIでURL情報を使った分岐
概要: JavaScriptのLocation APIを使用して、URL情報を基にクライアントサイドで条件分岐を行う。

用途:
ページのURLパスやクエリパラメータに基づいて動的な処理を実行。

例:
javascript
if (location.pathname === '/contact') {
    console.log('お問い合わせページの処理');
}


4. ユーザーロールやデバイスによる分岐
概要: ユーザーの権限（管理者、編集者、購読者など）やデバイス（PC、モバイル）に応じた処理を実行。

用途:
ユーザーのロールに基づいて専用のコンテンツや機能を提供。

例:
php
if (current_user_can('administrator')) {
    echo '<p>管理者向けの内容</p>';
}


5. カスタムタクソノミーやクエリパラメータによる分岐
概要: 投稿が属するカテゴリやタグ、カスタムタクソノミーの値、またはURLのクエリパラメータを条件に応じて処理を切り替える。

用途:
特定のカテゴリやクエリパラメータに基づいてデザインや機能を変更。

例（カテゴリの場合）:
php
if (has_term('special-category', 'category')) {
    echo '<p>特別カテゴリの投稿</p>';
}
例（クエリパラメータの場合）:

php
if (isset($_GET['promo'])) {
    echo '<p>プロモーション用コンテンツ</p>';
}

6. CSSクラスやテンプレート階層を活用
概要: PHPでbodyクラスや特定のテンプレートを動的に判別し、それに応じた処理やスタイリングを適用。

用途:
テーマカスタマイズや、特定のページ専用のスタイル・スクリプトを適用する。

例（CSSクラスを追加）:
php
add_filter('body_class', function ($classes) {
    if (is_page('portfolio')) {
        $classes[] = 'portfolio-page';
    }
    return $classes;
});
