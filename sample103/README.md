WebDesign HTMLã€CSSã€JavaScript ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§ã‚«ãƒ¼ãƒ†ãƒ³ãŒé–‹ãã‚ˆã†ãªã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ 20250612

document.addEventListener("DOMContentLoaded", () => {
  const wrappers = document.querySelectorAll(".curtain-wrapper");

  const observer = new IntersectionObserver(
    entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add("active");
        }
      });
    },
    {
      threshold: 0.4, // è¡¨ç¤ºé ˜åŸŸã®40%å…¥ã£ãŸã‚‰
    }
  );

  wrappers.forEach(wrapper => observer.observe(wrapper));
});

ðŸ’¡ãƒã‚¤ãƒ³ãƒˆ
.curtain ã¯è¦ç´ å…¨ä½“ã‚’è¦†ã£ã¦ãŠã‚Šã€translateX(100%) ã§å³ã¸ã‚¹ãƒ©ã‚¤ãƒ‰ã—ã¦ã€Œé–‹ãã€æ¼”å‡ºã€‚
.content ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§é€æ˜Žï¼ˆopacity: 0ï¼‰ã€ã‚«ãƒ¼ãƒ†ãƒ³ãŒé–‹ã„ãŸã‚‰ opacity: 1 ã§è¡¨ç¤ºã€‚
IntersectionObserver ã‚’ä½¿ã£ã¦ã€ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§ç”»é¢å†…ã«å…¥ã£ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’æ¤œçŸ¥ã—ã¦ã„ã¾ã™ã€‚

ã‚³ãƒ¼ãƒ‰è§£èª¬ï¼š
document.addEventListener("DOMContentLoaded", () => {
ðŸ“Œ æ„å‘³: ãƒšãƒ¼ã‚¸ã®HTMLï¼ˆDOMï¼‰ãŒã™ã¹ã¦èª­ã¿è¾¼ã¾ã‚ŒãŸã‚‰ã€é–¢æ•°ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
ðŸ’¡ãƒã‚¤ãƒ³ãƒˆ: ç”»åƒã‚„ã‚¹ã‚¿ã‚¤ãƒ«ãŒèª­ã¿è¾¼ã¾ã‚Œã‚‹å‰ã§ã‚‚ã€HTMLã®è¦ç´ ãŒä½¿ãˆã‚‹çŠ¶æ…‹ã«ãªã£ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ç™ºå‹•ã—ã¾ã™ã€‚

  const wrappers = document.querySelectorAll(".curtain-wrapper");
ðŸ“Œ æ„å‘³: HTMLã®ä¸­ã§ã€.curtain-wrapper ã¨ã„ã†ã‚¯ãƒ©ã‚¹ã‚’æŒã¤ã™ã¹ã¦ã®è¦ç´ ã‚’å–å¾—ã—ã¦ã€wrappersã¨ã„ã†å¤‰æ•°ã«å…¥ã‚Œã¾ã™ã€‚
ðŸ’¡ä¾‹: è¤‡æ•°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã« .curtain-wrapper ãŒã‚ã‚Œã°ã€ãã‚Œã‚‰å…¨éƒ¨ã‚’å¯¾è±¡ã«ã—ã¾ã™ã€‚

  const observer = new IntersectionObserver(
ðŸ“Œ æ„å‘³: æ–°ã—ã IntersectionObserver ã¨ã„ã†ç›£è¦–ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œã‚Šã¾ã™ã€‚
ðŸ’¡ç›®çš„: ã‚ã‚‹è¦ç´ ãŒç”»é¢ã«è¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆäº¤å·®ã™ã‚‹ï¼‰ã‹ã©ã†ã‹ã‚’è‡ªå‹•çš„ã«ç›£è¦–ã™ã‚‹ãŸã‚ã®ä»•çµ„ã¿ã€‚

    entries => {
ðŸ“Œ æ„å‘³: ç›£è¦–ã—ã¦ã„ã‚‹è¦ç´ ãŒç”»é¢å†…ã«å…¥ã£ãŸã‹å‡ºãŸã‹ã‚’ entriesï¼ˆä¸€è¦§ï¼‰ã§å—ã‘å–ã‚‹é–¢æ•°ã®å§‹ã¾ã‚Šã§ã™ã€‚

      entries.forEach(entry => {
ðŸ“Œ æ„å‘³: entries ã®ä¸­ã«ã¯è¤‡æ•°ã®è¦ç´ ã®æƒ…å ±ãŒã‚ã‚‹ã®ã§ã€ãã‚Œã‚’1ã¤ãšã¤é †ç•ªã«å‡¦ç†ã—ã¾ã™ã€‚


        if (entry.isIntersecting) {
ðŸ“Œ æ„å‘³: è¦ç´ ãŒè¡¨ç¤ºç”»é¢å†…ã«40%ä»¥ä¸Šå…¥ã£ã¦ã„ã‚‹ã‹ã©ã†ã‹ï¼ˆäº¤å·®ã—ã¦ã„ã‚‹ã‹ï¼‰ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚
ðŸ’¡trueãªã‚‰ã€Œè¡¨ç¤ºã•ã‚ŒãŸã€ã¨ã¿ãªã—ã¾ã™ã€‚

          entry.target.classList.add("active");
ðŸ“Œ æ„å‘³: è¡¨ç¤ºã•ã‚ŒãŸè¦ç´ ï¼ˆentry.targetï¼‰ã« active ã¨ã„ã†ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ ã—ã¾ã™ã€‚
ðŸ’¡ã“ã®ã‚¯ãƒ©ã‚¹ãŒCSSå´ã§ã€Œã‚«ãƒ¼ãƒ†ãƒ³ã‚’é–‹ãã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç™ºå‹•ã•ã›ã¾ã™ã€‚

        }
ðŸ“Œ æ„å‘³: if æ–‡ã®çµ‚ã‚ã‚Šã€‚

      });
ðŸ“Œ æ„å‘³: entries.forEach() ã®çµ‚ã‚ã‚Šã€‚ã™ã¹ã¦ã®ç›£è¦–å¯¾è±¡è¦ç´ ã‚’å‡¦ç†ã—ã¾ã™ã€‚

    },
    {
      threshold: 0.4, // è¡¨ç¤ºé ˜åŸŸã®40%å…¥ã£ãŸã‚‰
    }
  );
ðŸ“Œ æ„å‘³: IntersectionObserver ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³è¨­å®šã€‚

threshold: 0.4 ã¯ã€è¦ç´ ãŒç”»é¢å†…ã«40%ä»¥ä¸Šå…¥ã£ãŸã¨ãã«åå¿œã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

  wrappers.forEach(wrapper => observer.observe(wrapper));
ðŸ“Œ æ„å‘³: ã•ã£ãå–å¾—ã—ãŸã™ã¹ã¦ã® .curtain-wrapper è¦ç´ ã«å¯¾ã—ã¦ã€ç›£è¦–ã‚’é–‹å§‹ï¼ˆobserveï¼‰ã—ã¾ã™ã€‚
ðŸ’¡ã“ã‚Œã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã«ã‚ˆã‚‹è¡¨ç¤ºãƒã‚§ãƒƒã‚¯ãŒæœ‰åŠ¹ã«ãªã‚Šã¾ã™ã€‚

});
ðŸ“Œ æ„å‘³: DOMContentLoaded ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã‚’é–‰ã˜ã‚‹éƒ¨åˆ†ã§ã™ã€‚
ðŸ’¡ã“ã‚Œã§ã™ã¹ã¦ã®å‡¦ç†ãŒã€HTMLèª­ã¿è¾¼ã¿å®Œäº†å¾Œã«å®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚




âœ… IntersectionObserver ã¨ã¯ï¼Ÿ
ã‚ã‚‹è¦ç´ ãŒã€åˆ¥ã®è¦ç´ ï¼ˆã¾ãŸã¯ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆï¼‰ã¨äº¤å·®ã—ãŸã‹ã©ã†ã‹ï¼ˆï¼è¡¨ç¤ºé ˜åŸŸã«å…¥ã£ãŸã‹ã©ã†ã‹ï¼‰ã‚’éžåŒæœŸã«ç›£è¦–ã§ãã‚‹ API ã§ã™ã€‚

ðŸŸ¨ðŸŸ¨ðŸŸ¨
âœ…IntersectionObserverã®ä»•çµ„ã¿
new IntersectionObserver(callback, {
  root: null,         // ç›£è¦–å¯¾è±¡ï¼ˆnullã¯ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆï¼‰
  rootMargin: "0px",  // è¡¨ç¤ºã‚¨ãƒªã‚¢ã®ãƒžãƒ¼ã‚¸ãƒ³èª¿æ•´
  threshold: 0.4      // å¯¾è±¡è¦ç´ ã®è¡¨ç¤ºå‰²åˆï¼ˆ0ã€œ1ï¼‰
});

IntersectionObserver ã¯ JavaScriptï¼ˆæ­£ç¢ºã«ã¯ Web APIï¼‰ã®ä¸€éƒ¨ã¨ã—ã¦ã€ãƒ–ãƒ©ã‚¦ã‚¶ã«ã‚‚ã¨ã‚‚ã¨çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ä»•çµ„ã¿ã§ã™ã€‚
è‡ªåˆ†ã§å®šç¾©ã—ãŸã‚Šã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’è¿½åŠ ã—ãŸã‚Šã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
Chromeã€Firefoxã€Safariã€Edge ãªã©ã®ä¸»è¦ãƒ–ãƒ©ã‚¦ã‚¶ã«æ¨™æº–å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚

ðŸ“Œ ä½¿ã†ã¨ä½•ãŒã§ãã‚‹ï¼Ÿ
ãŸã¨ãˆã°ï¼š
ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ã¦ããŸã¨ãã«è¦ç´ ã‚’ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤ºï¼ˆã„ã‚ã‚†ã‚‹ã€Œãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³ã€ã€Œã‚«ãƒ¼ãƒ†ãƒ³ã€åŠ¹æžœï¼‰
åºƒå‘Šã‚„ç”»åƒãªã©ã‚’ é…å»¶èª­ã¿è¾¼ã¿ï¼ˆLazy Loadï¼‰
ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã§èª­ã¿é€²ã‚ãŸæ™‚ã® ç¾åœ¨ä½ç½®ã®ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³åˆ‡æ›¿
ç„¡é™ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆãƒšãƒ¼ã‚¸ã®ä¸€ç•ªä¸‹ãŒè¦‹ãˆãŸã‚‰ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¿½åŠ ï¼‰

ðŸ§ª ç™»å ´ã®èƒŒæ™¯ï¼ˆãªãœç”Ÿã¾ã‚ŒãŸï¼Ÿï¼‰
å¾“æ¥ã¯æ¬¡ã®ã‚ˆã†ã«ã—ã¦ç›£è¦–ã—ã¦ã„ã¾ã—ãŸï¼š

window.addEventListener('scroll', () => {
  const rect = element.getBoundingClientRect();
  if (rect.top < window.innerHeight) {
    // è¦ç´ ãŒè¡¨ç¤ºã•ã‚ŒãŸ
  }
});
â†’ ã“ã‚Œã§ã¯å‡¦ç†ãŒé‡ããªã£ãŸã‚Šã€è¤‡é›‘ã«ãªã‚Šã‚„ã™ã„ã€‚

ãã“ã§ã€IntersectionObserver ãŒç™»å ´ã—ã€åŠ¹çŽ‡çš„ã§è»½é‡ãªç›£è¦–æ‰‹æ®µã¨ã—ã¦ä½¿ã‚ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚

âœ… ä¸»è¦ãƒ–ãƒ©ã‚¦ã‚¶ã®å¯¾å¿œçŠ¶æ³
ãƒ–ãƒ©ã‚¦ã‚¶	    å¯¾å¿œçŠ¶æ³
Chrome	â—‹      å¯¾å¿œæ¸ˆã¿
Firefox	â—‹      å¯¾å¿œæ¸ˆã¿
Safari (iOSå«ã‚€)	â—‹ å¯¾å¿œæ¸ˆã¿
Edge	â—‹      å¯¾å¿œæ¸ˆã¿
Internet Explorer	âŒ éžå¯¾å¿œï¼ˆIE11ä»¥å‰ï¼‰
ðŸ“Œ 2020å¹´ä»¥é™ã€IEã®ã‚µãƒãƒ¼ãƒˆçµ‚äº†ã«ã‚ˆã‚Šã€IntersectionObserver ã¯å®Ÿç”¨ä¸Šã»ã¼å…¨ãƒ–ãƒ©ã‚¦ã‚¶ã§ä½¿ãˆã¾ã™ã€‚

âœ… ã¾ã¨ã‚
é …ç›®	                å†…å®¹
çµ„ã¿è¾¼ã¿ã‹ï¼Ÿ	        âœ… ã‚‚ã¨ã‚‚ã¨ã‚ã‚‹ï¼ˆWebæ¨™æº–APIï¼‰
å¯¾å¿œãƒ–ãƒ©ã‚¦ã‚¶	        IEä»¥å¤–ã®ãƒ¢ãƒ€ãƒ³ãƒ–ãƒ©ã‚¦ã‚¶ã¯ã™ã¹ã¦å¯¾å¿œ
ä¸»ãªç”¨é€”	           è¦ç´ ã®è¡¨ç¤ºæ¤œçŸ¥ã€ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«é€£å‹•å‡¦ç†ã€Lazy Loadã€ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ›´æ–° ãªã©
ç‰¹é•·	               è»½é‡ãƒ»é«˜æ€§èƒ½ãƒ»ã‚³ãƒ¼ãƒ‰ãŒç°¡æ½”




âœ… threshold: 0.4ï¼ˆã‚¹ãƒ¬ãƒƒã‚·ãƒ¥ãƒ›ãƒ¼ãƒ«ãƒ‰ï¼šå‡ºç™ºç‚¹ãƒ»å…¥ã‚Šå£ï¼‰
ã“ã‚Œã¯ï¼š
ã€Œå¯¾è±¡ã®è¦ç´ ï¼ˆentry.targetï¼‰è‡ªä½“ã®é¢ç©ã®ã†ã¡ã€40%ãŒãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆï¼ˆç”»é¢è¡¨ç¤ºé ˜åŸŸï¼‰ã«å…¥ã£ã¦ã„ã‚‹çŠ¶æ…‹ã«ãªã£ãŸã‚‰ã€ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯é–¢æ•°ã‚’å®Ÿè¡Œã™ã‚‹ã€
ã¨ã„ã†æ„å‘³ã§ã™ã€‚

ðŸ” å›³ã§ã‚¤ãƒ¡ãƒ¼ã‚¸
--------------------------- â† ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆä¸Šç«¯
|                         |
|        â†‘               |
|     è¦ç´ ã®ä¸€éƒ¨          |
|    ï¼ˆ40%ä»¥ä¸ŠãŒè¡¨ç¤ºï¼‰     |
|                         |
--------------------------- â† ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆä¸‹ç«¯
ãƒ“ãƒ¥ãƒ¼ãƒãƒ¼ãƒˆå´ï¼ˆè¡¨ç¤ºé ˜åŸŸï¼‰ã® 40% ã§ã¯ ãªã„

å¯¾è±¡è¦ç´ è‡ªèº«ã® 40% ãŒè¡¨ç¤ºé ˜åŸŸã«å…¥ã£ãŸã‹ã©ã†ã‹ ã§ã™

ðŸ“¦ å…·ä½“ä¾‹ã§è€ƒãˆã‚‹
ðŸŽ¯ è¦ç´ ã®é«˜ã•ãŒ 500px ã®å ´åˆï¼š
ãã® 40% = 200px
è¦ç´ ã®200pxä»¥ä¸ŠãŒç”»é¢ã«å…¥ã£ãŸçž¬é–“ã« isIntersecting: true ã«ãªã‚‹



ã€é »å‡ºWebãƒ‡ã‚¶ã‚¤ãƒ³ã€‘ç”»åƒã‹ã‚™ã‚«ãƒ¼ãƒ†ãƒ³çŠ¶ã«è¡¨ç¤ºã•ã‚Œã‚‹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
https://www.youtube.com/watch?v=N-HyeCuwCs4

https://www.youtube.com/watch?v=T0u6j6GNaHk
ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼CSSã¨JSã§ã‚«ãƒ¼ãƒ†ãƒ³ã‹ã‚™é–‹ãã‚ˆã†ã«è¦ç´ ã‚’è¡¨ç¤ºï¼