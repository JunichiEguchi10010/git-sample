Node.js のバージョン管理 について 20250823

💼 実務でよく使われる方法
方法	                        実務での使用頻度	    理由
nvm（Node Version Manager）	    高い	            複数プロジェクトで異なるNode.jsバージョンを簡単に切り替えられる
volta	                        増加中	            プロジェクト単位でバージョンを固定でき、チーム開発に強い
グローバルに1つのバージョンだけ使う	少ない	            複数プロジェクトで互換性の問題が起きやすい

🧠 なぜプロジェクト単位で切り替えるのか？
新旧のライブラリが混在するため、Node.jsのバージョンによって動作が変わる
チームで開発する場合、全員が同じバージョンを使う必要がある
CI/CD（自動化環境）でも、バージョン固定が必須

🔧 実務での構成
例えば：
グローバル → Node.js v22（最新機能を試す）
プロジェクトA → Node.js v18（Gulpや古いツールを使う）
プロジェクトB → Node.js v20（TypeScriptやESM対応）


✅ 方法①：nvm（Node Version Manager）を使う
Windowsの場合は nvm-windows を使うのが定番です。
🔧 手順
nvm-windows をインストール GitHubの nvm-windows リリースページ からインストーラーをダウンロードして実行。

Node.js v18 をインストール
bas
nvm install 18.20.2

このプロジェクトで v18 を使う プロジェクトフォルダに移動してから：
bash
nvm use 18.20.2
※このコマンドは「一時的に」v18を使う状態にします。 
別のターミナルを開いた場合は再度 nvm use が必要です。

✅ 方法②：volta を使う（よりプロジェクト単位で管理したい場合）
volta は Node.js のバージョンをプロジェクト単位で固定できるツールです。
🔧 手順
Volta をインストール（公式サイトから）
プロジェクトフォルダで以下を実行：
bash
volta pin node@18
これで .volta フォルダが作成され、このプロジェクトでは常に Node.js v18 が使われるようになります。

✅ 方法③：node を直接切り替える（手動）
もしツールを使いたくない場合は、Node.js v18 を別フォルダにインストールしておき、プロジェクト内のスクリプトで直接パスを指定する方法もあります。ただし、管理が面倒なので nvm や volta の方が断然おすすめです。

🟧 🛠 Voltaでプロジェクト単位のNode.jsバージョンを固定する手順
① Voltaをインストールする
Volta公式サイト（https://volta.sh）にアクセス

「Install」ボタンをクリックして、Windows用インストーラーをダウンロード

インストーラーを実行して、VoltaをPCにインストール

※インストール後、ターミナル（PowerShellやコマンドプロンプト）を再起動してください

② Node.js v18 をインストールする
bash
volta install node@18
このコマンドで Node.js v18 が Volta にインストールされます
グローバル環境でも v18 を使えるようになります（後で切り替え可能）

③ プロジェクトフォルダに移動する
bash
cd C:\Users\eguchijunichi\git-sample\sample155\demo-sample-app
Voltaは「今いるフォルダ」に対して設定を行うので、必ずプロジェクトのルートに移動してください

④ このプロジェクト専用に Node.js v18 を固定する
bash
volta pin node@18
.volta フォルダと package.json に設定が追加されます

このプロジェクトでは常に Node.js v18 が使われるようになります（他のプロジェクトには影響なし）

⑤ バージョンが固定されたか確認する
bash
node -v
プロジェクトフォルダ内でこのコマンドを実行すると v18.x.x が表示されれば成功です！

✅ 補足：他のプロジェクトではどうなる？
Voltaはプロジェクトごとにバージョンを切り替えてくれるので、他のフォルダでは node -v を実行すると、グローバルのNode.js（v22など）が使われます